# ğŸŸ¨ JavaScript Essentials

**TryHackMe â€” Cyber Security 101 â†’ Web Hacking**

---

## ğŸ› ï¸ Task 1 â€” Introduction

---

### ğŸ“˜ Introduction

JavaScript (JS) is a **client-side scripting language** that allows web developers to add **interactivity and dynamic behavior** to websites that are otherwise built using HTML and CSS.

Once HTML elements are created and styled, JavaScript can be used to:

* Validate user input
* Handle button clicks and events
* Display alerts and prompts
* Dynamically update page content
* Perform calculations
* Control logic and flow within the browser

While HTML defines **structure** and CSS defines **appearance**, JavaScript defines **behavior**.

From a security perspective, JavaScript is extremely important because attackers frequently **abuse legitimate JavaScript functionality** to achieve malicious outcomes such as:

* Manipulating logic
* Bypassing controls
* Stealing data
* Triggering unintended application behavior

---

### ğŸ§  Image Explanation (Conceptual)

**Image shown:**
A laptop with a JavaScript (`JS`) logo on the screen.

**What this image represents conceptually:**
This image emphasizes that JavaScript runs **inside the browser**, on the **userâ€™s machine**, not on the server. This distinction is critical for security because **client-side logic can be inspected, modified, or bypassed by an attacker**.

---

### ğŸ¯ Room Purpose

This room is designed as an **introductory overview of JavaScript**, specifically tailored for:

* Beginners with limited JavaScript experience
* Learners approaching JavaScript from a **cybersecurity and pentesting perspective**

Rather than teaching JavaScript for software development, the focus is on:

* Understanding how JavaScript works
* Recognizing how attackers exploit JavaScript logic
* Identifying insecure JavaScript implementations

---

### ğŸ“‹ Room Prerequisites

Before starting this room, you should already be familiar with:

* **Linux Fundamentals**
* **Web Application Basics**
* **How Websites Work**

These prerequisites ensure you understand browsers, servers, HTTP, and basic web communication before diving into JavaScript behavior.

---

### ğŸ¯ Learning Objectives

By completing this room, you will be able to:

* Understand the **basics of JavaScript**
* Integrate JavaScript into HTML pages
* Identify and abuse **dialogue functions** such as alerts and prompts
* Bypass **control flow statements**
* Explore **minified JavaScript files**
* Understand JavaScript **best practices from a security perspective**

These objectives will be reinforced progressively throughout the tasks.

---

## âœ… Task 1 Status

This task establishes:

* What JavaScript is
* Why it matters for security
* How it fits into the web stack
* How the lab environment works

---

## ğŸ› ï¸ Task 2 â€” Essential Concepts

This task introduces **core JavaScript concepts** that are required to understand how client-side logic works in modern web applications. From a security perspective, these concepts are critical because attackers often abuse JavaScript logic to bypass validation, manipulate application flow, or execute malicious behavior.

---

## ğŸ“¦ Variables

### What Are Variables?

Variables are **containers used to store data values** in memory so they can be reused later in a program.

In JavaScript, every variable:
- Has a **name**
- Holds a **value**
- Can be referenced and modified throughout the script

Think of a variable like a **labeled bucket**:
- The label is the variable name
- The contents are the stored value

---

### Declaring Variables in JavaScript

JavaScript provides **three ways** to declare variables:

```js
var
let
const
````

#### `var`

* Function-scoped
* Older and less secure
* Can be redeclared and reassigned
* Can lead to unexpected behavior due to scope leakage

#### `let`

* Block-scoped
* Can be reassigned but not redeclared in the same scope
* Preferred for values that change

#### `const`

* Block-scoped
* Cannot be reassigned after declaration
* Used for values that should remain constant

---

## ğŸ§¬ Data Types

Data types define **what kind of data a variable can store**.

Common JavaScript data types include:

* `string` â†’ Text values

  ```js
  let name = "Alice";
  ```

* `number` â†’ Numeric values

  ```js
  let age = 25;
  ```

* `boolean` â†’ True / False

  ```js
  let isAdmin = false;
  ```

* `null` â†’ Explicitly empty value

* `undefined` â†’ Variable declared but not assigned

* `object` â†’ Complex structures (arrays, objects, JSON)

Understanding data types is essential because:

* User input is often type-dependent
* Type confusion can lead to logic flaws
* Improper handling can enable attacks (e.g., bypassing checks)

---

## ğŸ§  Functions

### What Is a Function?

A function is a **reusable block of code** designed to perform a specific task.

Functions:

* Reduce repetition
* Improve readability
* Encapsulate logic

---

### Example Function (From Lesson)

```html
<script>
function PrintResult(rollNum) {
  alert("Username with roll number " + rollNum + " has passed the exam");
  // any other logic to display the result
}

for (let i = 0; i < 100; i++) {
  PrintResult(rollNumbers[i]);
}
</script>
```

---

### Explanation

* `PrintResult(rollNum)` defines a function
* `rollNum` is an **argument**
* The function displays an alert message
* A `for` loop calls the function multiple times

Instead of writing the same alert 100 times, the function is reused.

---

### ğŸ–¼ï¸ Image Explained â€” Function Execution

The image visually demonstrates:

* One function definition
* Multiple calls to the same function
* How loops and functions work together

This is critical for pentesters because:

* Client-side functions often enforce validation
* Attackers look for ways to bypass or alter function behavior

---

## ğŸ” Loops

Loops allow you to **run a block of code multiple times** as long as a condition remains `true`.
They are commonly used to repeat tasks, such as iterating over lists, processing user input, or executing the same logic for multiple records.

In JavaScript, the most common loops are:

* `for`
* `while`
* `do...while`

---

### Why Loops Matter (Conceptually)

Without loops, repetitive tasks would require writing the same line of code over and over again, which is inefficient and error-prone.

For example, if we wanted to display the exam results of **100 students**, we could:

* Call the same function **100 separate times** (bad practice), **or**
* Use a loop to call the function automatically for each student (correct approach)

---

### Building on the Function Example

Earlier, we defined a function to print a studentâ€™s result:

```javascript
// Function to print student result
function PrintResult(rollNum) {
    alert("Username with roll number " + rollNum + " has passed the exam");
    // any other logic to display the result
}
```

This function works for **one student**, but what if we have **many students**?

---

### Using a `for` Loop to Repeat the Function Call

Instead of calling `PrintResult()` manually 100 times, we use a loop:

```javascript
for (let i = 0; i < 100; i++) {
    PrintResult(rollNumbers[i]); // this will be called 100 times
}
```

#### Whatâ€™s happening here:

* `let i = 0`
  Initializes a counter variable

* `i < 100`
  Sets the loop condition (runs while true)

* `i++`
  Increments the counter after each iteration

* `PrintResult(rollNumbers[i])`
  Calls the function once per iteration, passing in the current roll number

This loop executes **100 times**, automatically calling the function for each student.

---

### Why This Is Important for Security

From a security and pentesting perspective, loops are important because:

* Loops can process **user-controlled input repeatedly**
* Improper validation inside loops can lead to:

  * Logic flaws
  * Infinite loops (Denial of Service)
  * Mass execution of unintended actions
* Attackers often exploit loops combined with weak conditions

Understanding how loops work helps you identify **where code repeats and how it can be abused**.

---

### Loop Types at a Glance

| Loop Type    | Description                                  |
| ------------ | -------------------------------------------- |
| `for`        | Best for known iteration counts              |
| `while`      | Runs while a condition is true               |
| `do...while` | Runs at least once before checking condition |

---

### ğŸ“ Answer the Question Below

**What term allows you to run a code block multiple times as long as it is a condition?**
âœ… **loop**

---

## ğŸŒ Requestâ€“Response Cycle

### What Is the Requestâ€“Response Cycle?

The **requestâ€“response cycle** describes how a web application communicates:

1. The **browser (client)** sends a request
2. The **web server** processes it
3. The **server responds** with data

This could be:

* HTML
* JavaScript
* JSON
* API responses

---

### Why This Matters for JavaScript

JavaScript:

* Executes in the browser
* Handles user interactions
* Often processes server responses

Attackers exploit JavaScript to:

* Modify requests
* Alter responses
* Inject malicious behavior

Understanding this cycle is **fundamental to web hacking**.

---

## ğŸ› ï¸ Task 3 â€” JavaScript Overview

### ğŸ“˜ What Is JavaScript?

JavaScript (JS) is a **high-level, interpreted scripting language** primarily used to make web pages interactive.  
Unlike HTML (structure) and CSS (styling), JavaScript controls **logic, behavior, and interactivity** on a webpage.

JavaScript runs mainly **inside the browser**, allowing developers to dynamically modify content, respond to user actions, validate inputs, and communicate with backend services.

From a security perspective, JavaScript is especially important because:
- It executes on the **client side**
- It can be **viewed, modified, and abused** by attackers
- Poorly written JavaScript often leads to **logic flaws**, **bypass vulnerabilities**, and **XSS**

---

### ğŸ§± Core JavaScript Building Blocks

---

### ğŸ§© Variables

Variables store data values that JavaScript can work with.

Example:
```js
let name = "John";
````

* `let` declares a block-scoped variable
* `"John"` is a string value assigned to `name`

Variables allow JavaScript to **store user input**, **track state**, and **control program flow**.

---

### ğŸ§© Conditional Statements

Conditional statements allow JavaScript to make decisions based on conditions.

Example:

```js
if (age > 18) {
    console.log("You are an adult.");
} else {
    console.log("You are a minor.");
}
```

**Explanation:**

* The condition `age > 18` is evaluated
* If true â†’ the first block executes
* If false â†’ the `else` block executes

From a security standpoint, **client-side conditionals are never trustworthy**, as attackers can manipulate them.

---

### ğŸ§© Functions

Functions group reusable blocks of code that perform a specific task.

Example:

```js
function greet(name) {
    console.log("Hello, " + name + "!");
}
```

Calling the function:

```js
greet("THM");
```

**What this does:**

* Accepts an argument (`name`)
* Prints a greeting message to the console

Functions reduce repetition and are commonly abused when developers assume they enforce security logic on the client.

---

1. Open **Google Chrome**
2. Right-click anywhere on the page
3. Select **Inspect**
4. Navigate to the **Console** tab
5. Type JavaScript code and press Enter

Example executed in the console:

```js
let x = 5;
let y = 3;
let result = x + y;
console.log("The result is: " + result);
```

**Result displayed in the console:**

```
The result is: 8
```

---

### ğŸ§  Why This Matters

* JavaScript executed in the browser:

  * Does **not require additional tools**
  * Can be **modified in real time**
  * Is a prime target for attackers

Understanding how JavaScript runs in the console is essential for:

* Debugging applications
* Testing logic
* Exploiting client-side flaws during pentesting

---

### âš™ï¸ JavaScript Execution Model

JavaScript is an **interpreted language**, meaning:

* Code is executed **line by line**
* No compilation step is required
* Errors appear immediately during execution

This differs from compiled languages like C or Java, which must be built before execution.

---

### ğŸ“ Answer the Questions Below

**What is the data output if the value of x is changed to 10?**
âœ… `The result is: 13`

**Is JavaScript a compiled or interpreted language?**
âœ… `Interpreted`

---

### ğŸ” Security Takeaway

Because JavaScript:

* Runs on the client
* Can be inspected and altered
* Is not trusted for enforcement

**Never rely on JavaScript alone for authentication, authorization, or validation.**

All security controls must be enforced **server-side**.

---

## ğŸ› ï¸ Task 4 â€” Integrating JavaScript in HTML

### ğŸ“˜ Overview

JavaScript works together with **HTML** and **CSS** to create dynamic and interactive web pages.

- **HTML** defines the structure of a page
- **CSS** controls the styling and layout
- **JavaScript** adds logic, calculations, and interactivity

In this task, we explore **how JavaScript is integrated into HTML** and the two primary ways scripts can be included:

1. **Internal JavaScript**
2. **External JavaScript**

Understanding this distinction is important for:
- Code organization
- Maintainability
- Debugging
- Security analysis during penetration testing

---

## ğŸ”¹ Internal JavaScript

### What Is Internal JavaScript?

**Internal JavaScript** refers to JavaScript code written **directly inside an HTML file**, typically enclosed within `<script>` tags.

This method is often preferred for:
- Beginners
- Small scripts
- Quick testing or demonstrations

Because the script lives inside the HTML file, it executes as part of the page load.

---

### ğŸ–¼ï¸ Creating the File

The following steps:

1. On the Desktop, create a new file named:
```

internal.html

````
2. Right-click the file
3. Select **Open With â†’ Chrome**
4. Edit the file using a text editor

---

### ğŸ“„ Internal JavaScript Example

```html
<!DOCTYPE html>
<html lang="en">
<head>
 <title>Internal JS</title>
</head>
<body>

<h1>Addition of Two Numbers</h1>
<p id="result"></p>

<script>
 let x = 5;
 let y = 10;
 let result = x + y;
 document.getElementById("result").innerHTML = "The result is: " + result;
</script>

</body>
</html>
````

---

### ğŸ§  What This Code Does (Step-by-Step)

* `let x = 5;` and `let y = 10;`
  â†’ Declares two variables

* `let result = x + y;`
  â†’ Performs addition

* `document.getElementById("result")`
  â†’ Selects the `<p>` element with `id="result"`

* `.innerHTML = "The result is: " + result;`
  â†’ Writes the output to the webpage

---

### ğŸ–¼ï¸ Browser Output

The browser displays:

```
Addition of Two Numbers
The result is: 15
```

This confirms that:

* JavaScript executed successfully
* The script modified the HTML dynamically

---

### âš ï¸ Important Note (Execution Timing)

Internal JavaScript runs **as the browser parses the HTML**.

Because the `<script>` is placed **after the HTML elements**, the script can safely access the DOM elements.
If the script were placed too early, it might execute before elements exist, causing errors.

---

## ğŸ”¹ External JavaScript

### What Is External JavaScript?

**External JavaScript** means placing JavaScript code in a **separate `.js` file** and linking it to an HTML document.

This method is preferred when:

* Reusing code across multiple pages
* Building larger applications
* Keeping HTML clean and organized

---

### ğŸ“„ External JavaScript File (`script.js`)

```javascript
let x = 5;
let y = 10;
let result = x + y;
document.getElementById("result").innerHTML = "The result is: " + result;
```

---

### ğŸ“„ HTML File Using External JavaScript

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>External JS</title>
</head>
<body>

<h1>Addition of Two Numbers</h1>
<p id="result"></p>

<!-- Link to the external JS file -->
<script src="script.js"></script>

</body>
</html>
```

---

### ğŸ§  Key Difference from Internal JavaScript

* JavaScript code is **not inside the HTML**
* The `<script>` tag uses the `src` attribute
* The browser loads the JavaScript file separately

This improves:

* Readability
* Maintainability
* Scalability

---

### ğŸ–¼ï¸ (Browser Output)

The output is **identical** to the internal example:

```
Addition of Two Numbers
The result is: 15
```

This confirms that:

* Both internal and external JS behave the same at runtime
* The difference is **organization**, not functionality

---

## ğŸ” Verifying Internal vs External JavaScript

### Viewing Page Source

1. Right-click the webpage
2. Select **View Page Source**

---

### ğŸ§  What to Look For

* **Internal JavaScript**
  â†’ Code appears directly between `<script>` tags

* **External JavaScript**
  â†’ `<script src="script.js"></script>` appears instead
  â†’ Actual JS code lives in a separate file

---

### ğŸ–¼ï¸ Real-World Example (TryHackMe)

Inspecting the source code of `https://tryhackme.com` reveals:

* Multiple external JavaScript files
* Scripts loaded from CDNs
* Separation between structure and behavior

This is typical of modern web applications.

---

## ğŸ“ Answer the Questions Below

**Which type of JavaScript integration places the code directly within the HTML document?**
âœ… `Internal`

**Which method is better for reusing JS across multiple web pages?**
âœ… `External`

**What is the name of the external JS file being called by `external_test.html`?**
âœ… `script.js`

**What attribute links an external JS file in the `<script>` tag?**
âœ… `src`

---

## ğŸ› ï¸ Task 5 â€” Abusing Dialogue Functions

### ğŸ“˜ Overview

One of the major objectives of JavaScript is to provide **dialogue boxes** for interaction with users and to dynamically update content on web pages. JavaScript provides built-in dialogue functions such as:

* `alert()`
* `prompt()`
* `confirm()`

These functions allow developers to:

* Display messages
* Gather user input
* Obtain user confirmation

However, **if not implemented securely**, attackers may exploit these features to execute attacks such as **Cross-Site Scripting (XSS)** or to intentionally degrade the user experience.

For the exercises in this task, we will be using the **Google Chrome Developer Console**.

---

## ğŸ”” Alert

### What `alert()` Does

The `alert()` function displays a **dialogue box** with:

* A message
* A single **â€œOKâ€** button

It is typically used to convey information or warnings to users.

### Example

```javascript
alert("Hello THM");
```

### Alert Example

* The browser displays a modal dialog titled:
  **â€œchrome://new-tab-page saysâ€**
* The dialog contains:

  * Message text: **Hello THM**
  * A single **OK** button
* The background page is **blocked** until the user clicks OK

### Key Takeaway

* Alerts are **blocking** (they stop page interaction)
* Overuse can degrade user experience
* Malicious use can be weaponized

---

## ğŸ§¾ Prompt

### What `prompt()` Does

The `prompt()` function displays a dialogue box that:

* Asks the user for input
* Provides:

  * A text input field
  * **OK** and **Cancel** buttons

### Return Values

* Returns the **user-entered value** if OK is clicked
* Returns **null** if Cancel is clicked

### Example

```javascript
name = prompt("What is your name?");
alert("Hello " + name);
```

### Prompt Example

* A dialogue box appears titled:
  **â€œchrome://new-tab-page saysâ€**
* The dialog text asks:
  **â€œWhat is your name?â€**
* The user enters text (e.g., `Sabalekq`)
* Clicking **OK** returns the value to the JavaScript variable
* The next alert displays:
  **â€œHello Sabalekqâ€**

### Key Takeaway

* Prompt input is **untrusted user input**
* Must never be trusted without validation
* Can be abused for XSS if injected into the DOM improperly

---

## âœ… Confirm

### What `confirm()` Does

The `confirm()` function displays a dialogue box with:

* A message
* Two buttons:

  * **OK**
  * **Cancel**

### Return Values

* Returns **true** if OK is clicked
* Returns **false** if Cancel is clicked

### Example

```javascript
confirm("Are you sure?");
```

### Confirm Example

* The browser displays a dialog titled:
  **â€œchrome://new-tab-page saysâ€**
* Message shown:
  **â€œAre you sure?â€**
* Buttons:

  * OK â†’ returns `true`
  * Cancel â†’ returns `false`
* The returned value appears in the console

### Key Takeaway

* Commonly used for confirmation flows
* Can be bypassed or abused if relied upon for security decisions

---

## ğŸš¨ How Hackers Exploit This Functionality

### Scenario Explanation

Imagine receiving an email from a stranger with an attached **HTML file**.
The file looks harmless, but when opened, it contains JavaScript designed to disrupt your browsing experience.

### Malicious Example Code

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Hacked</title>
</head>
<body>
    <script>
        for (let i = 0; i < 3; i++) {
            alert("Hacked");
        }
    </script>
</body>
</html>
```

### Exploit Example

* File name: `invoice.html`
* When opened:

  * An alert dialog appears saying **â€œHackedâ€**
  * The alert pops up **three times**
* The user must repeatedly click **OK** to regain control

### Escalation Scenario

If the loop value were changed from `3` to `500`:

* The user would be forced to close **hundreds of alert boxes**
* Browser usability would be severely impacted
* This could be used for:

  * Harassment
  * Denial-of-Experience
  * Social engineering

### Security Implications

* Alerts, prompts, and confirms are **not secure controls**
* They should never be trusted for:

  * Authentication
  * Authorization
  * Validation
* Executing JavaScript from untrusted sources is dangerous

---

## ğŸ§  Pentester Perspective

When testing applications, look for:

* âŒ Excessive or unvalidated use of `alert()`, `prompt()`, `confirm()`
* âŒ User input passed directly into DOM or alerts
* âŒ JavaScript logic relying on `confirm()` for security decisions
* âŒ Downloadable HTML files with embedded scripts

---

## ğŸ“ Answer the Questions Below

**In the file `invoice.html`, how many times does the code show the alert â€œHackedâ€?**
âœ… **5**

**Which JavaScript interactive element should be used to display a dialogue box that asks the user for input?**
âœ… **prompt**

**If the user enters `Tesla`, what value is stored in the variable?**

```javascript
carName = prompt("What is your car name?");
```

âœ… **Tesla**

---

Youâ€™re right to call that out â€” good eye.
Nothing â€œmysticalâ€ happened, I just didnâ€™t mirror the **visual + structural cue** TryHackMe uses at the start of each task. Letâ€™s fix that cleanly.

Below is **ONLY the corrected header + opening for Task 6**, written to **match Task 5â€™s format and tone**.
No extra content, no drift.

---

## ğŸ” Task 6 â€” Bypassing Control Flow Statements

Control flow in JavaScript determines **the order in which statements and code blocks are executed** based on certain conditions. JavaScript provides several control flow structures such as:

- `if...else`
- `switch`
- Loops like `for`, `while`, and `do...while`

These structures allow developers to make decisions, enforce logic, and control how applications behave based on user input or program state.

From a security perspective, **relying solely on client-side control flow is dangerous**. Since JavaScript runs in the userâ€™s browser, attackers can manipulate or bypass these controls entirely, allowing them to access restricted functionality or sensitive information.

In this task, we will focus on:

- How **conditional statements** work in JavaScript
- How attackers can **bypass client-side logic**
- Why **client-side validation must never be trusted for security**

We will again use the **Google Chrome Developer Console** and simple HTML/JavaScript examples to demonstrate these concepts.
---

## Conditional Statements in Action

One of the most used conditional statements is the `if...else` statement, which allows you to execute different blocks of code depending on whether a condition evaluates to `true` or `false`.

To test this practically, let's create a file `age.html` on the Desktop of the attached VM and paste the following code:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Age Verification</title>
</head>
<body>
    <h1>Age Verification</h1>
    <p id="message"></p>

    <script>
        age = prompt("What is your age")
        if (age >= 18) {
            document.getElementById("message").innerHTML = "You are an adult.";
        } else {
            document.getElementById("message").innerHTML = "You are a minor.";
        }
    </script>
</body>
</html>
````

Double-click the file to open it in Google Chrome. You will see the following image:

### ğŸ–¼ï¸ Age Verification + prompt

* A simple webpage titled **â€œAge Verificationâ€**
* The page displays a result message on the left (example shown: **â€œYou are an adult.â€**) *(callout 2)*
* A browser prompt popup asks: **â€œWhat is your ageâ€**

  * Example input shown: `21` *(callout 1)*
  * Buttons: **Cancel** and **OK**

In the above code, a prompt will ask for your age; if your age is greater than or equal to 18, it will display a message saying: **â€œYou are an adult.â€** Otherwise, it will show a different message. This behavior is controlled by the `if...else` statement, which checks the value of the age variable and displays the appropriate message.

---

## Bypassing Login Forms

Suppose a developer has implemented an authentication functionality in JS, where only users with the username **`admin`** and password matching a specific value are allowed to log in. To see this in action, open the file `login.html` in the **exercise** folder.

### ğŸ–¼ï¸ exercise folder view

* The VM file browser is open to the **exercise** folder on the Desktop
* Several lab files are visible (including HTML/JS files)
* `login.html` is highlighted/selected (callout 2)
* The **exercise** folder is visible on the Desktop (callout 1)

When you double-click the file and open it in your browser, it will prompt you for a username and password. If the correct credentials are entered, it will display a message confirming that you are logged in, as shown below:

### ğŸ–¼ï¸ successful login result

* A page titled **â€œLogin Authenticationâ€**
* A message box displays: **â€œYou are successfully authenticated!â€**

---

## Answer the questions below

1. **What is the message displayed if you enter the age less than 18?**
   âœ… `You are a minor.`

2. **What is the password for the user admin?**
   âœ… `ComplexPassword`

---

## âœ… Task 7 â€” Exploring Minified Files

Weâ€™ve learned how JavaScript works and how it can be usedâ€”but what if the JavaScript file is **not human-readable**? That usually happens when it has been **minified** (and sometimes also **obfuscated**).

### Minification

**Minification** is the process of compressing JavaScript by removing all unnecessary characters such as **spaces, line breaks, comments, and even shortening variable names**.

* âœ… **Benefit (developer perspective):** smaller file size â†’ faster downloads â†’ faster page load times (especially in production)
* âš ï¸ **Tradeoff (analysis perspective):** harder for humans to read, but the browser still runs it normally

### Obfuscation

**Obfuscation** often goes further than minification by **intentionally making JS harder to understand** using techniques like:

* renaming variables/functions to meaningless names (`_0x1c7a`, `a`, `b`)
* inserting â€œdummyâ€ logic or confusing expressions
* hiding strings (like `"Welcome to THM"`) inside arrays or encoded values

**Important security note:** Obfuscation is **not real security**â€”itâ€™s mainly a speed bump for analysts/pentesters/reverse engineers. If it runs in the browser, it can be analyzed.

---

## Practical Example

### Step 1 â€” Create `hello.html`

Create a file called **`hello.html`** on the Desktop of the attached VM and paste this HTML:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Obfuscated JS Code</title>
</head>
<body>
  <h1>Obfuscated JS Code</h1>
  <script src="hello.js"></script>
</body>
</html>
```

#### ğŸ–¼ï¸ conceptual

* A simple HTML page titled **â€œObfuscated JS Codeâ€**
* The key part is the line:

  ```html
  <script src="hello.js"></script>
  ```

  That tells the browser: â€œload and run JavaScript from `hello.js`.â€

---

### Step 2 â€” Create `hello.js`

Create another file named **`hello.js`** and paste:

```javascript
function hi() {
  alert("Welcome to THM");
}
hi();
```

This does two things:

1. Defines a function `hi()` that triggers a browser popup (`alert`)
2. Calls `hi()` immediately, so the popup appears when the page loads

---

### Step 3 â€” Run it

Double-click **`hello.html`** to open it in Chrome.

#### ğŸ–¼ï¸ conceptual

* A browser alert box pops up saying:

  **â€œWelcome to THMâ€**
* Thereâ€™s an **OK** button you must click to dismiss it

This is important because it proves: **your HTML successfully loaded and executed the JS**.

---

### Step 4 â€” Prove the code is still visible

After closing the alert, right-click the page and choose **Inspect** (Developer Tools).

Then go to the **Sources** tab and locate **`hello.js`**.

#### conceptual

* A right-click menu with **Inspect** highlighted
* Chrome DevTools open
* In **Sources**, you can see `hello.js`
* The code is displayed cleanly and readable

âœ… Key takeaway: even if JS is â€œhiddenâ€ in a file, itâ€™s **still retrievable by anyone** using browser dev tools.

---

## Obfuscation in Action

Now you obfuscate the JavaScript using an online tool.

### Step 5 â€” Obfuscate `hello.js`

Go to a JavaScript obfuscation website (TryHackMe demonstrates this visually).

1. Copy the contents of `hello.js`
2. Paste it into the obfuscator input
3. Click **Obfuscate**
4. Youâ€™ll get a long â€œgibberish-lookingâ€ output

#### ğŸ–¼ï¸conceptual

* A split interface:

  * **Left pane:** your clean JS input
  * **Right pane:** the obfuscated output (huge code blob)
* The output contains:

  * weird variable names
  * encoded strings
  * confusing structure

### Step 6 â€” Replace JS with obfuscated output

Take that obfuscated output and paste it back into **`hello.js`** (replacing your original code), then reload `hello.html`.

âœ… You should still get the same popup behavior because the browser runs the logic the same way, even if it looks unreadable.

---

## Deobfuscating a Code

TryHackMe then shows reversing the process using **Obfuscator.io Deobfuscator**.

### Step 7 â€” Deobfuscate using an online tool

1. Copy the obfuscated code
2. Paste it into **Obfuscator.io Deobfuscator**
3. Click **Deobfuscate**
4. The tool outputs a more human-readable version

#### ğŸ–¼ï¸ conceptual

* A deobfuscator page with:

  * left side showing messy obfuscated code
  * right side showing a cleaned-up version
* A **Deobfuscate** button highlighted

âœ… Key takeaway: Obfuscation can often be reversed (fully or partially).

---

## âš ï¸ Pentester Notes: Why One Tool Might Not â€œJiveâ€ With Another

This is the real-world part TryHackMe doesnâ€™t fully emphasize, but you *will* run into it:

* **Not all obfuscators use the same techniques.** Some use string-array encoding + rotation, some use control-flow flattening, some use unicode escapes, etc.
* **Deobfuscators are not universal.** A deobfuscator might:

  * fail completely,
  * only partially clean the code,
  * or output code that still runs but is messy.

Common reasons:

* The code was **minified + obfuscated**, so formatting is gone *and* structure is intentionally distorted.
* Obfuscator options like **self-defending**, **domain-lock**, **stringsoundness/anti-tamper tricks**, or aggressive control-flow transforms can break automated cleanup.
* Some tools expect patterns from *their own* obfuscator output, so another vendorâ€™s output wonâ€™t map cleanly.

**Practical approach (what you do as a junior pentester):**

* Try multiple tools (beautifier, deobfuscator, browser devtools, manual tracing)
* Start with:

  * â€œpretty print / beautifyâ€
  * search for obvious strings
  * set breakpoints and watch runtime values
* Treat automated deobfuscation as a **helper**, not a guarantee.

---

## Answer the questions below

1. **What is the alert message shown after running the file `hello.html`?**
   âœ… `Welcome to THM`

2. **What is the value of the age variable in the following obfuscated code snippet?**
   âœ… `21`

Got it. Iâ€™m going to do **Task 8 and Task 9 only**, **fully rebuilt**, **no omissions**, **GitHub-ready**, and written so **future-you understands exactly what THM was showing, why it matters, and how it connects to security/pentesting**.

Iâ€™ll keep the **same structure, icon style, depth, and tone** you approved in the earlier tasks.

---

## ğŸ› ï¸ Task 8 â€” Best Practices

This task outlines **secure JavaScript development best practices**.  
While JavaScript is essential for adding interactivity to modern web applications, **poor design choices can significantly increase the attack surface**.

From a pentesting perspective, these mistakes are **common findings** during web application assessments.

---

### ğŸš« Avoid Relying on Client-Side Validation Only

One of JavaScriptâ€™s primary uses is **client-side validation**, such as:

- Checking required fields
- Validating email formats
- Enforcing password complexity
- Preventing empty form submissions

While this improves **user experience**, it **does NOT provide security**.

#### Why This Is Dangerous

Client-side JavaScript:
- Runs **entirely in the userâ€™s browser**
- Can be **disabled**
- Can be **modified**
- Can be **bypassed using developer tools, proxies, or custom requests**

An attacker can:
- Disable JavaScript entirely
- Modify validation logic in the browser
- Send requests directly to the backend (e.g., using Burp Suite, curl, Postman)

#### Security Rule

> **Client-side validation is for usability.  
> Server-side validation is for security.**

All validation **must be re-checked on the server**, regardless of what JavaScript does.

---

### ğŸš« Refrain from Adding Untrusted Libraries

JavaScript allows developers to load external scripts using the `src` attribute inside a `<script>` tag.

Example:
```html
<script src="https://example-cdn.com/library.js"></script>
````

#### Why This Is Risky

Attackers often:

* Upload **malicious libraries** to public repositories
* Name them similarly to popular libraries (typosquatting)
* Compromise legitimate CDNs
* Inject malicious updates into dependencies

If a malicious library is loaded:

* It executes with the **same privileges as your application**
* It can steal cookies, tokens, or credentials
* It can inject malicious DOM elements or scripts

#### Best Practice

* Only include libraries from **trusted, verified sources**
* Pin versions explicitly
* Prefer self-hosted libraries when possible
* Use **Subresource Integrity (SRI)** when loading third-party scripts

---

### ğŸš« Avoid Hardcoded Secrets

Never store sensitive information directly inside JavaScript code.

#### âŒ Bad Practice Example

```js
// Bad Practice
const privateAPIKey = "pk_TryHackMe-1337";
```

#### Why This Is Critical

JavaScript:

* Is **always visible to the user**
* Can be viewed via:

  * `View Page Source`
  * Browser Developer Tools
  * Network tab
  * Saved responses

Attackers can easily extract:

* API keys
* Access tokens
* Credentials
* Secrets used for backend services

#### Correct Approach

* Store secrets **server-side**
* Use environment variables
* Issue temporary tokens
* Enforce backend authorization checks

---

### ğŸ” Minify and Obfuscate Your JavaScript Code

Minification and obfuscation are **defensive techniques**, not security controls.

#### What Minification Does

* Removes whitespace
* Renames variables
* Compresses code into fewer characters

Result:

* Smaller file size
* Faster load times

#### What Obfuscation Does

* Renames variables to meaningless values
* Rearranges logic
* Makes the code harder to read and analyze

#### Important Security Note

> Minification and obfuscation **do not prevent attacks**
> They only **increase the effort required to reverse engineer code**

Attackers can still:

* Deobfuscate code
* Debug scripts
* Hook functions
* Analyze behavior dynamically

However, obfuscation:

* Slows down analysis
* Protects intellectual property
* Raises the bar slightly for attackers

---

### ğŸ“ Answer the Question Below

**Is it a good practice to blindly include JS in your code from any source (yes/no)?**

âœ… **Answer:** `nay`

---

## ğŸ› ï¸ Task 9 â€” Conclusion

ğŸ‰ **Congratulations on completing the JavaScript Essentials room!**

Throughout this room, you built a **foundational understanding of JavaScript** from both a **development** and **security** perspective.

---

### ğŸ“š What You Learned

You covered:

* The **basics of JavaScript** and how it runs in the browser
* Writing your **first JavaScript code**
* **Integrating JavaScript into HTML** (internal vs external)
* Using interactive functions like:

  * `alert()`
  * `prompt()`
  * `confirm()`
* How attackers can **abuse dialogue functions**
* How **control flow statements** (`if`, loops) can be bypassed
* How JavaScript can be:

  * **Minified**
  * **Obfuscated**
  * **Deobfuscated**
* Secure **best practices** to reduce attack surface

---

### ğŸ§  Security Mindset Takeaway

JavaScript is powerful â€” and dangerous when misused.

As a pentester, you should always ask:

* What logic is enforced **only on the client**?
* What can be bypassed or modified?
* What secrets are exposed in scripts?
* What third-party code is being trusted?
* How does obfuscation affect analysis (and how can it be reversed)?

---

### ğŸš€ Moving Forward

You now have the foundation needed to:

* Understand JavaScript behavior during web assessments
* Identify insecure client-side logic
* Analyze obfuscated scripts
* Transition into real-world attacks like:

  * XSS
  * DOM-based vulnerabilities
  * Client-side authentication bypasses

---

### ğŸ“ Answer the Question Below

**I have successfully completed the room.**
âœ… *No answer needed*






