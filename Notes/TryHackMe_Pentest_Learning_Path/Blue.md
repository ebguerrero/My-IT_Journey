# ğŸ§© BLUE â€” Penetration Test Cookbook

### **Section 1 â€” Initial Scan (Nmap)**

*My notes, my thought process, and what I learned.*

---

## ğŸ”» Task: â€œScan the machine.â€

TryHackMe gives a basic instruction but no question to answer.
This is the first step: enumeration.

---

# ğŸ§  **My Thought Process (Beginner Mindset)**

I know â€œScan the machineâ€ means I need an **Nmap scan**, but I wasnâ€™t sure which type.
My instinct was to use my â€œgeneral all-purpose scanâ€:

```
nmap -sC -sV -p- -oA scan_results <TARGET IP>
```

Why I chose this:

* `-sC` â†’ default scripts
* `-sV` â†’ version detection
* `-p-` â†’ scan all ports
* `-oA` â†’ save output in all formats

This is a **good scan**, but:

* It is **slow**
* It hits **all 65,535 ports**
* In THM networks, packet loss sometimes causes Nmap to â€œhangâ€
* The BLUE room expects you to focus on **vulnerability scripts**, not every port

I saw the scan â€œstallingâ€ (the output repeating open/closed hosts, etc.) and decided to abort and delete the files.

Nothing wrong with this â€” scanning all ports is heavy.

---

# ğŸ§  Why the THM Hint Command Worked Better

TryHackMe suggested:

```
nmap -sV -vv --script vuln <TARGET IP>
```

This command:

* Does **NOT** scan all ports
* Relies on **service detection results**
* Runs **vulnerability scanning scripts**
* Is tailored toward finding *old Windows vulnerabilities*, which is what â€œBLUEâ€ is about

## ğŸ“Œ Why this works well for THIS room:

The BLUE machine is a Windows 7 system vulnerable to **EternalBlue (MS17-010)**.
Nmap has a script that checks for exactly that.

Your scan output confirms:

```
smb-vuln-ms17-010: VULNERABLE
```

This is exactly why the THM hint uses this command â€” it quickly leads beginners to the right vulnerability.

---

# ğŸ§© **My Actual Commands and Screenshots**

## ğŸ”¹ Attempted â€œFull Everything Scanâ€

```
nmap -sC -sV -p- -oA scan_results 10.65.157.216
```

* The scan repeatedly printed â€œSYN Stealth Scan Timingâ€¦â€
* No clear results returned
* I cancelled and deleted the autogenerated files
* This happens when network timing or Nmap retries take too long

ğŸ“· *Screenshot notes:*
You captured the repeated timing lines and the `ls -l` directory listing afterward showing the leftover `.gnmap`, `.nmap`, `.xml`.

---

## ğŸ”¹ Successful THM-Recommended Scan

```
nmap -sV -vv --script vuln 10.65.157.216
```

This produced **useful**, structured results:

* Open ports
* Service versions
* Vulnerabilities discovered
* SMB scripts including MS17-010

### Key findings from your scan:

**Open Ports:**

```
135/tcp â€“ msrpc  
139/tcp â€“ netbios-ssn  
445/tcp â€“ microsoft-ds  
3389/tcp â€“ rdp  
49152-49158/tcp â€“ Windows high RPC port range
```

These ports â†’ classic Windows 7 host.

**Vulnerabilities reported:**

```
smb-vuln-ms17-010: VULNERABLE   <â€” EternalBlue
```

This is the main pivot point for the entire BLUE room.

---

# ğŸ§  What I Learned from This Step

### âœ”ï¸ Lesson 1 â€” Use the right tool for the right job

Scanning all ports is good practice for real-world pentesting,
but in guided labs, the hint scan is often more focused.

### âœ”ï¸ Lesson 2 â€” The `--script vuln` scan is your â€œWindows vulnâ€ shortcut

Especially strong for:

* SMB (445)
* MS08-067
* MS17-010
* RDP vulnerabilities
* Windows RPC exposures

### âœ”ï¸ Lesson 3 â€” Default scripts (`-sC`) â‰  vulnerability scripts

* `-sC` runs *default scan scripts*
* `--script vuln` runs *security vulnerability checks*

### âœ”ï¸ Lesson 4 â€” If Nmap â€œhangsâ€

It's usually:

* packet loss
* full-port scan slowdowns
* retry delays
* network firewalls or throttling

Cancel + switch scan type = valid approach.

---

This section now captures:
âœ” Your attempt
âœ” Your reasoning
âœ” What happened
âœ” Why the hint works
âœ” What to remember next time

---

## ğŸŸ¦ Task: How many ports are open under port number 1000?

### ğŸ§  My Thought Process

The task asked me to determine how many **open ports** existed with **port numbers lower than 1000**.

Since I had already completed enumeration using the command:

```bash
nmap -sV -vv --script vuln <target IP>
````

â€¦I returned to the scan output and reviewed all services marked as **open**, filtering only those whose port numbers were **less than 1000**.

---

### ğŸ” Relevant Output from Nmap

```text
135/tcp   open   msrpc
139/tcp   open   netbios-ssn
445/tcp   open   microsoft-ds
```

Each of these ports falls below the `1000` threshold and is marked in the scan output as **open**.

No other open ports below 1000 were identified.

---

### âœ”ï¸ Final Answer

âœ… **3**

---




