
# ğŸ› ï¸ Offensive Security Tooling â€” Hydra (TryHackMe)

> **Room/Module Context:** Offensive Security Tooling introduces tools used for offensive security: **Hydra** (password attacks), **Gobuster** (content discovery), **SQLMap** (SQL injection exploitation).

---

## ğŸ”¹ Task 1 â€“ Hydra Introduction

### âœ… What I did (per Task 1)
- Started the **Kali Linux / AttackBox** instance in TryHackMe.
- Read the introductory material to understand what Hydra is and why itâ€™s used.

---

### ğŸ§  What Hydra is (plain English)
**Hydra** is a **login brute-forcing tool**. That means it repeatedly attempts logins against a service using:
- a known username + a password list, or
- a username list + a known password, or
- both lists

Hydra is useful because many systems still fail to enforce:
- rate limiting / lockouts
- MFA
- strong password policy

> âš ï¸ Use Hydra **only** on systems you have permission to test.

---

### ğŸ” What â€œbrute forcing a loginâ€ actually means
Hydra automates what a human could do manually:
1. Send a login attempt
2. Observe success or failure
3. Repeat with the next password
4. Stop when success is found

Hydra simply does it **very fast** and **consistently**.

---

### ğŸ§° Installing / Accessing Hydra (what matters for labs)
In most TryHackMe Kali/AttackBox environments, Hydra is already installed.  
To confirm Hydra is available:

```bash
hydra -h
````

#### Input Explained (every part)

* `hydra` â†’ launches the Hydra program
* `-h` â†’ shows the help menu (syntax + supported modules)

#### Output Explained

* Youâ€™ll see:

  * supported services (ssh, ftp, http-post-form, etc.)
  * examples of command structure
  * options like threads, verbosity, etc.

---

### âœ… Task 1 Completion

TryHackMe Task 1 is primarily **orientation**:

* Understand what Hydra does
* Ensure you can run Hydra (or have it ready)

---

### ğŸ§ª Hands-On Experimentation (Task 1 Approved)

> These are safe â€œskill-buildingâ€ steps that reinforce the concept without requiring you to crack anything.

1. **See what services Hydra can attack**

   ```bash
   hydra -h | less
   ```

   * Practice scanning the help output
   * Look for modules like `ssh`, `ftp`, `http-post-form`

2. **Understand the â€œshapeâ€ of Hydra commands**

   * Notice most commands follow:

     * user info (`-l` or `-L`)
     * password info (`-p` or `-P`)
     * target IP/host
     * service/module name

3. **Confirm your wordlists exist**

   ```bash
   ls -lh /usr/share/wordlists/
   ```

   * Youâ€™re verifying where common lists live (like `rockyou.txt`)

> âš ï¸ Note: On some Kali installs, `rockyou.txt` may be compressed (`rockyou.txt.gz`) and needs:

```bash
sudo gzip -d /usr/share/wordlists/rockyou.txt.gz
```

---

## ğŸ”¹ Task 2 â€“ Using Hydra

### âœ… Goal (what Task 2 is really testing)

Task 2 expects you to:

1. Identify what services the target exposes (web + SSH)
2. Understand **how** Hydra targets each one
3. Use Hydra to discover credentials
4. Use those credentials to retrieve:

   * **Flag 1 (web login)**
   * **Flag 2 (SSH login)**

---

### âœ… What I did (per Task 2)

* Started the **target machine** (Hydra Challenge) and the Kali/AttackBox.
* Enumerated the target using Nmap to confirm services and ports.
* Inspected the login form HTML to extract the exact POST parameter names.
* Triggered a failed login to capture the exact failure message.
* Ran Hydra against:

  * **Web login (http-post-form)** â†’ got credentials â†’ retrieved **Flag 1**
  * **SSH** â†’ got credentials â†’ logged in â†’ retrieved **Flag 2**

---

### 1) Identify the Target Services (Enumeration)

#### Command used

```bash
nmap -sC -sV 10.65.175.156
```

#### Input Explained (every part)

* `nmap` â†’ network scanner used to discover open ports/services
* `-sC` â†’ runs Nmap â€œdefault scriptsâ€ (safe, common checks)
* `-sV` â†’ detects service versions (what software is running)
* `10.65.175.156` â†’ the target IP

#### Output Explained (what to look for)

From the scan results:

* `22/tcp open ssh` â†’ SSH service is available (Hydra can brute-force SSH)
* `80/tcp open http` â†’ website is available (Hydra can brute-force web form logins)

Also important:

* The scan indicated the web appâ€™s requested resource was **`/login`**, which strongly suggests the login page endpoint.

âœ… This confirms the two services needed for Task 2:

* **Web login (HTTP)**
* **SSH login**

---

### 2) Confirm the Web Login Endpoint

Open the login page in the browser:

```text
http://10.65.175.156/login
```

---

### 3) Extract the Web Form Parameters (Hydra MUST match these)

Using browser Developer Tools â†’ Inspector, the form contained:

* Form:

  * `action="/login"`
  * `method="post"`

* Input fields:

  * `name="username"`
  * `name="password"`

âœ… This means the server expects POST body parameters like:

```text
username=<value>&password=<value>
```

> **Key concept:** Hydra doesnâ€™t â€œfill HTML fields.â€
> Hydra sends raw HTTP requests that mimic what the browser submits.

---

### 4) Identify the Failure Message (Hydra needs this to detect â€œwrong passwordâ€)

Trigger a bad login attempt (example: test / test).
The page responded with:

```text
Your username or password is incorrect.
```

âœ… We can safely use the substring **`incorrect`** as Hydraâ€™s failure indicator.

---

### 5) Run Hydra Against the Web Login (Flag 1)

#### Command used

```bash
hydra -l molly -P /usr/share/wordlists/rockyou.txt 10.65.175.156 http-post-form "/login:username=^USER^&password=^PASS^:incorrect" -V
```

#### Input Explained (every part)

* `hydra` â†’ runs the Hydra tool
* `-l molly` â†’ **single fixed username**: `molly`

  * `-l` = â€œlogin/usernameâ€
* `-P /usr/share/wordlists/rockyou.txt` â†’ password list to try

  * `-P` = â€œpassword list fileâ€
* `10.65.175.156` â†’ target IP
* `http-post-form` â†’ tells Hydra this is a **web POST form login**
* `"/login:username=^USER^&password=^PASS^:incorrect"` â†’ the full web form â€œrecipeâ€

  * `/login` = the endpoint the form POSTs to (from `action="/login"`)
  * `username=^USER^&password=^PASS^` = the POST body format

    * `^USER^` is a Hydra placeholder that gets replaced with the current username being tried
    * `^PASS^` is a Hydra placeholder replaced with the current password being tried
  * `incorrect` = text Hydra should expect to see when a login fails
* `-V` â†’ verbose output (prints attempts; helpful for learning)

#### Why `^USER^` / `^PASS^` instead of copying HTML?

HTML:

```html
<input type="password" name="password">
```

Only the `name="password"` matters to the server.
The server receives POST data like:

```text
password=something
```

So Hydra must send:

```text
username=<user>&password=<pass>
```

Hydra uses:

* `^USER^` to fill the username value
* `^PASS^` to fill the password value

---

### 6) Validate Web Credentials and Retrieve Flag 1

After Hydra finds the correct password:

1. Return to the browser:

   ```text
   http://10.65.175.156/login
   ```
2. Log in as:

   * Username: `molly`
   * Password: *(the password Hydra discovered)*
3. The application reveals **Flag 1** after successful authentication.

âœ… Enter **Flag 1** into TryHackMe.

---

### 7) Run Hydra Against SSH (Flag 2)

#### Command used

```bash
hydra -l molly -P /usr/share/wordlists/rockyou.txt 10.65.175.156 ssh
```

#### Input Explained (every part)

* `hydra` â†’ runs Hydra
* `-l molly` â†’ fixed username `molly`
* `-P ...rockyou.txt` â†’ password list
* `10.65.175.156` â†’ target
* `ssh` â†’ tells Hydra to brute-force SSH on port 22 (default SSH)

#### Output Explained (what success looks like)

When Hydra succeeds, it will clearly display:

* host
* login
* password

---

### 8) Log in with SSH and Retrieve Flag 2

Use the discovered credentials to SSH in:

```bash
ssh molly@10.65.175.156
```

#### Input Explained

* `ssh` â†’ secure shell client
* `molly@10.65.175.156` â†’ connect as user `molly` to the target IP

After login:

* The system reveals **Flag 2** (commonly displayed or stored in a file in the userâ€™s home directory).

âœ… Enter **Flag 2** into TryHackMe.

---

### âš ï¸ Notes & Discrepancies (Important â€œreal worldâ€ observation)

* Some tutorials/examples reference endpoints like `login.php`, but this target used:

  * Node.js/Express style endpoint: **`/login`**
* The exact **form action** and **input field names** must be extracted from the real page:

  * `action="/login"`
  * `name="username"`
  * `name="password"`
* Hydra requires a failure string that **actually appears** in the response:

  * `Your username or password is incorrect.` â†’ use substring `incorrect`

This is a key pentesting habit:

> **Never trust example syntax blindly â€” always confirm the real request structure.**

---

### ğŸ§ª Hands-On Experimentation (Task 2 Approved)

1. **Practice form recon: confirm the request method**

   * In DevTools â†’ Network tab:

     * Submit a bad login
     * Click the request
     * Confirm it is `POST /login`
     * Confirm the form body contains `username=...&password=...`

2. **Practice changing only ONE variable at a time**

   * Try Hydra with `-vV` (more verbose) and fewer guesses to confirm behavior:

     ```bash
     hydra -l molly -P /usr/share/wordlists/rockyou.txt 10.65.175.156 http-post-form "/login:username=^USER^&password=^PASS^:incorrect" -vV
     ```
   * Learn what â€œnormal failuresâ€ look like in output before success.

3. **Thread tuning (speed vs stability)**

   * Increase threads carefully:

     ```bash
     hydra -l molly -P /usr/share/wordlists/rockyou.txt -t 4 10.65.175.156 ssh
     ```
   * `-t 4` = 4 parallel tasks (avoid going huge; can cause lockouts or missed results on real systems)

4. **Replace Nmap â€œmuscle memoryâ€**

   * Repeat the scan with a slightly different focus:

     ```bash
     nmap -p 22,80 -sV 10.65.175.156
     ```
   * This reinforces â€œtargeted scanningâ€ once you know what ports matter.

5. **Make the â€œmental chainâ€ automatic**

   * Write this in your notes as a checklist you can reuse:

     * Nmap â†’ open ports â†’ service type
     * web? â†’ find form action + input names + failure string
     * build Hydra module line
     * use creds to log in
     * retrieve flag / proof


